# 分库分表后的查询如何解决？
## 1 C端
在shardingkey的时候，使用用户id，查询的时候就相当于单标查询；
如果只是订单号怎么办？订单号带上用户id，还是根据用户id做sharding，这也就涉及到如何设计分布式全局唯一订单号，比如：41位的时间戳你觉得用不完，用户ID是10位的，订单号的生成规则带上用户ID，落具体表的时候根据订单号中10位用户ID hash取模。
## 2 B端
后台商户管理系统，需要查询商户的订单，两种办法，一个是双写，多写一份数据是用商户id做sharding的，另一个就是用数据仓库或ES的聚合方式。

参考
[百亿级数据分表后怎么分页查询？](https://www.cnblogs.com/ilovejaney/p/13946833.html)